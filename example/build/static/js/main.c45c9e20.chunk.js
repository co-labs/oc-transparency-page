(this["webpackJsonpoc-transparency-page-example"]=this["webpackJsonpoc-transparency-page-example"]||[]).push([[0],{151:function(e,a,t){e.exports=t(261)},152:function(e,a,t){},259:function(e,a,t){},261:function(e,a,t){"use strict";t.r(a);t(152);var n=t(0),r=t.n(n),l=t(16),o=t.n(l),c=t(137),s=t(64),i=t(45),d=t(319),m=t(316),u=t(81),_=t.n(u),g=t(317),p=t(303),b=t(38),h=t(88),f=t(101),E=t(8),w=t.n(E),v=t(310),y=t(314),x=t(313),N=t(308),k=t(311),S=t(312),C=t(315),A=t(318),P=t(309),O=t(306),j=t(103),M=t.n(j),I=t(105),Y=t.n(I),R=t(104),z=t.n(R),D=t(102),$=t.n(D);function q(){var e=Object(c.a)(["\n  query ExpensesPage(\n    $account: AccountReferenceInput!\n    $slug: String!\n    $offset: Int!\n    $dateFrom: ISODateTime!\n  ) {\n    expenses(\n      account: $account\n      orderBy: { field: CREATED_AT, direction: ASC }\n      offset: $offset\n      limit: 100\n      status: PAID\n      dateFrom: $dateFrom\n    ) {\n      offset\n      totalCount\n      limit\n      nodes {\n        id\n        amount\n        tags\n        description\n        currency\n        status\n        createdAt\n      }\n    }\n    account(slug: $slug) {\n      id\n      imageUrl\n      name\n    }\n  }\n"]);return q=function(){return e},e}var B=Object(p.a)((function(e){return{body:{},body__title:{fontSize:"1.5em",textAlign:"center",[e.breakpoints.down("xs")]:{fontSize:"1.2em"}},charts:{flexGrow:1},charts__bar:{},charts__pie:{},charts__table:{},header:{padding:".5em",textAlign:"center"},header__logo:{height:"1em !important"},header__title:{fontSize:"2em",[e.breakpoints.down("xs")]:{fontSize:"1.6em"}},pagination:{flexShrink:0,marginLeft:e.spacing(2.5)},pagination__first:{},pagination__prev:{},pagination__next:{},pagination__last:{},table:{},table__head:{},table__head__row:{},table__head__row__cell:{fontSize:"1em",[e.breakpoints.down("xs")]:{fontSize:".8em",padding:10}},table__body:{},table__body__row:{},table__body__row__cell:{fontSize:".9em",[e.breakpoints.down("xs")]:{fontSize:".7em",padding:10}},table__footer:{},table__footer__row:{},"table-container":{},wrapper:{border:"1px solid red"}}})),F=function(e,a){var t,n,r,l=a/e,o=~~(6*l),c=6*l-o,s=1-c;switch(o%6){case 0:t=1,n=c,r=0;break;case 1:t=s,n=1,r=0;break;case 2:t=0,n=1,r=c;break;case 3:t=0,n=s,r=1;break;case 4:t=c,n=0,r=1;break;case 5:t=1,n=0,r=s}return"#".concat("00".concat((~~(255*t)).toString(16)).slice(-2)).concat("00".concat((~~(255*n)).toString(16)).slice(-2)).concat("00".concat((~~(255*r)).toString(16)).slice(-2))},L=function(e){var a=e.expenses,t=e.width,n=(e.height,[]),l=[];(a=Object(h.orderBy)(a,(function(e){return e.createdAt}))).map((function(e){var a=new _.a(e.createdAt).format("MM/YYYY"),t=n.findIndex((function(e){return e===a}));-1===t&&(t=n.push(a),t--);var r=l.findIndex((function(a){return a.label===e.tags[0]}));-1===r&&"undefined"!==typeof e.tags[0]&&(r=l.push({label:e.tags[0],data:[],backgroundColor:null,borderColor:null,borderWidth:1,stack:"default"}),r-=1),"undefined"!==typeof l[r]&&("undefined"===typeof l[r].data[t]&&(l[r].data[t]=0),l[r].data[t]+=e.amount/100)})),l.map((function(e,a){l[a].backgroundColor=F(l.length,a),l[a].borderColor=F(l.length,a)}));var o={labels:n,datasets:l};return r.a.createElement("div",{style:{height:t>600?350:450,position:"relative"}},r.a.createElement(f.Bar,{data:o,options:{maintainAspectRatio:!1,responsive:!0}}))};function T(e){var a=B(),t=Object(b.a)(),n=e.count,l=e.page,o=e.rowsPerPage,c=e.onChangePage;return r.a.createElement("div",{className:a.pagination},r.a.createElement(O.a,{className:a.pagination__first,onClick:function(e){c(e,0)},disabled:0===l,"aria-label":"first page"},"rtl"===t.direction?r.a.createElement($.a,null):r.a.createElement(M.a,null)),r.a.createElement(O.a,{className:a.pagination__prev,onClick:function(e){c(e,l-1)},disabled:0===l,"aria-label":"previous page"},"rtl"===t.direction?r.a.createElement(z.a,null):r.a.createElement(Y.a,null)),r.a.createElement(O.a,{className:a.pagination__next,onClick:function(e){c(e,l+1)},disabled:l>=Math.ceil(n/o)-1,"aria-label":"next page"},"rtl"===t.direction?r.a.createElement(Y.a,null):r.a.createElement(z.a,null)),r.a.createElement(O.a,{className:a.pagination__last,onClick:function(e){c(e,Math.max(0,Math.ceil(n/o)-1))},disabled:l>=Math.ceil(n/o)-1,"aria-label":"last page"},"rtl"===t.direction?r.a.createElement(M.a,null):r.a.createElement($.a,null)))}T.propTypes={count:w.a.number.isRequired,onChangePage:w.a.func.isRequired,page:w.a.number.isRequired,rowsPerPage:w.a.number.isRequired};var J=function(e){var a=e.expenses,t=(e.width,e.height,B()),n=a,l=r.a.useState(0),o=Object(s.a)(l,2),c=o[0],i=o[1],d=r.a.useState(10),m=Object(s.a)(d,2),u=m[0],_=m[1],g=u-Math.min(u,n.length-c*u);return r.a.createElement(N.a,{className:t["table-container"],component:P.a},r.a.createElement(v.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(k.a,{className:t.table__head},r.a.createElement(S.a,{className:t.table__head__row},r.a.createElement(x.a,{className:t.table__head__row__cell,align:"left"},"Description"),r.a.createElement(x.a,{className:t.table__head__row__cell,align:"left"},"Amount"),r.a.createElement(x.a,{className:t.table__head__row__cell,align:"right"},"Status"),r.a.createElement(x.a,{className:t.table__head__row__cell,align:"right"},"Tags"))),r.a.createElement(y.a,{className:t.table__body},(u>0?n.slice(c*u,c*u+u):n).map((function(e){return r.a.createElement(S.a,{className:t.table__body__row,key:e.id},r.a.createElement(x.a,{className:t.table__body__row__cell,component:"th",scope:"row"},e.description),r.a.createElement(x.a,{className:t.table__body__row__cell,style:{width:160},align:"right"},e.amount/100," ",e.currency),r.a.createElement(x.a,{className:t.table__body__row__cell,style:{width:160},align:"right"},e.status),r.a.createElement(x.a,{className:t.table__body__row__cell,style:{width:160},align:"right"},e.tags))})),g>0&&r.a.createElement(S.a,{className:t.table__body__row,style:{height:53*g}},r.a.createElement(x.a,{className:t.table__body__row__cell,colSpan:6}))),r.a.createElement(C.a,{className:t.table__footer},r.a.createElement(S.a,{className:t.table__footer__row},r.a.createElement(A.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:4,count:n.length,rowsPerPage:u,page:c,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,a){i(a)},onChangeRowsPerPage:function(e){_(parseInt(e.target.value,10)),i(0)},ActionsComponent:T})))))},K=function(e){var a=e.expenses,t=e.width,n=(e.height,[]),l=[{data:[],backgroundColor:[],hoverBackgroundColor:[]}];(a=Object(h.orderBy)(a,(function(e){return e.createdAt}))).map((function(e){var a,t=null!==(a=e.tags[0])&&void 0!==a?a:"undefined",r=n.findIndex((function(e){return e===t}));-1===r?(r=n.push(t),l[0].data[r-1]=e.amount/100):l[0].data[r]+=e.amount/100})),n.map((function(e,a){l[0].backgroundColor[a]=F(n.length,a),l[0].hoverBackgroundColor[a]=F(n.length,a)}));var o={labels:n,datasets:l};return r.a.createElement("div",{style:{height:t>600?300:350,position:"relative"}},r.a.createElement(f.Doughnut,{data:o,options:{maintainAspectRatio:!1,responsive:!0}}))};var Q,U=Object(i.gql)(Q||(Q=q())),W=function(e){var a=e.slug,t=e.locale,l=e.messages,o=e.date,c=B(),u=function(){var e=Object(n.useState)([0,0]),a=Object(s.a)(e,2),t=a[0],r=a[1];return Object(n.useLayoutEffect)((function(){var e=Object(h.debounce)((function(){r([window.innerWidth,window.innerHeight])}),100);return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}(),p=Object(s.a)(u,2),b=p[0],f=p[1],E=Object(n.useState)(null!==o&&void 0!==o?o:"2001-01-01"),w=Object(i.useQuery)(U,{variables:{account:{slug:a},slug:a,offset:0,dateFrom:E}}),v=w.loading,y=w.error,x=w.data,N=w.fetchMore;if(v)return r.a.createElement("p",null,"Loading...");if(y)return r.a.createElement("p",null,"Error :(");var k=x.account,S=x.expenses.nodes;return N({variables:{offset:x.expenses.nodes.length},updateQuery:function(e,a){var t=a.fetchMoreResult;return t?(t.expenses.nodes=e.expenses.nodes.concat(t.expenses.nodes),Object.assign({},t)):e}}).then((function(e){console.log("Res",e)})),l||(l={}),t||(t="en"),r.a.createElement(d.a,{locale:t,defaultLocale:"en",messages:l},r.a.createElement("div",{className:c.wrapper},r.a.createElement("div",{className:c.header},r.a.createElement("h1",{className:c.header__title},r.a.createElement("img",{className:c.header__logo,src:k.imageUrl,alt:""}),k.name)),r.a.createElement("div",{className:c.body},r.a.createElement("h2",{className:c.body__title},r.a.createElement(m.a,{id:"allExpensesFrom",defaultMessage:"All expenses from {date}",values:{date:_()(E,"YYYY-MM-DD").format("DD/MM/YYYY")}})),r.a.createElement(g.a,{className:c.charts,container:!0,spacing:5},r.a.createElement(g.a,{className:c.charts__bar,item:!0,xs:12,md:8},r.a.createElement(L,{expenses:S,width:b,height:f})),r.a.createElement(g.a,{className:c.charts__pie,item:!0,xs:12,md:4},r.a.createElement(K,{expenses:S,width:b,height:f})),r.a.createElement(g.a,{className:c.charts__table,item:!0,xs:12},r.a.createElement(J,{expenses:S,width:b,height:f}))))))},G=(t(259),localStorage.getItem("apiKey"));G||console.error("Missing API Key!");var H=new i.ApolloClient({uri:"https://api.opencollective.com/graphql/v2/"+G,cache:new i.InMemoryCache}),V=function(){return r.a.createElement(i.ApolloProvider,{client:H},r.a.createElement(W,{client:H,slug:"xr-belgium",date:"2018-01-01",messages:{allExpensesFrom:"All expenses from {date}"}}))};o.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.c45c9e20.chunk.js.map