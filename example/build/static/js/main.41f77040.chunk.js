(this["webpackJsonpoc-transparency-page-example"]=this["webpackJsonpoc-transparency-page-example"]||[]).push([[0],{151:function(e,a,t){e.exports=t(261)},152:function(e,a,t){},259:function(e,a,t){},261:function(e,a,t){"use strict";t.r(a);t(152);var n=t(0),r=t.n(n),l=t(16),c=t.n(l),o=t(137),s=t(64),i=t(45),u=t(319),m=t(316),d=t(81),g=t.n(d),p=t(303),f=t(38),h=t(317),E=t(100),b=t(101),v=t(8),x=t.n(v),w=t(310),y=t(314),C=t(313),k=t(308),A=t(311),O=t(312),P=t(315),S=t(318),j=t(309),M=t(306),_=t(103),R=t.n(_),Y=t(105),I=t.n(Y),D=t(104),$=t.n(D),q=t(102),B=t.n(q);function F(){var e=Object(o.a)(["\n  query ExpensesPage(\n    $account: AccountReferenceInput!\n    $slug: String!\n    $offset: Int!\n    $dateFrom: ISODateTime!\n  ) {\n    expenses(\n      account: $account\n      orderBy: { field: CREATED_AT, direction: ASC }\n      offset: $offset\n      limit: 100\n      status: PAID\n      dateFrom: $dateFrom\n    ) {\n      offset\n      totalCount\n      limit\n      nodes {\n        id\n        amount\n        tags\n        description\n        currency\n        status\n        createdAt\n      }\n    }\n    account(slug: $slug) {\n      id\n      imageUrl\n      name\n    }\n  }\n"]);return F=function(){return e},e}var N="_styles-module__title__2KezC",T="_styles-module__header__logo__1XkLR",L=function(e,a){var t,n,r,l=a/e,c=~~(6*l),o=6*l-c,s=1-o;switch(c%6){case 0:t=1,n=o,r=0;break;case 1:t=s,n=1,r=0;break;case 2:t=0,n=1,r=o;break;case 3:t=0,n=s,r=1;break;case 4:t=o,n=0,r=1;break;case 5:t=1,n=0,r=s}return"#".concat("00".concat((~~(255*t)).toString(16)).slice(-2)).concat("00".concat((~~(255*n)).toString(16)).slice(-2)).concat("00".concat((~~(255*r)).toString(16)).slice(-2))},J=function(e){var a=e.expenses,t=(e.width,e.height,[]),n=[];console.log("Count",a.length),(a=Object(E.orderBy)(a,(function(e){return e.createdAt}))).map((function(e){var a=new g.a(e.createdAt).format("MM/YYYY"),r=t.findIndex((function(e){return e===a}));-1===r&&(r=t.push(a),r--),console.log("Month",r);var l=n.findIndex((function(a){return a.label===e.tags[0]}));-1===l&&"undefined"!==typeof e.tags[0]&&(l=n.push({label:e.tags[0],data:[],backgroundColor:null,borderColor:null,borderWidth:1,stack:"default"}),l-=1),"undefined"!==typeof n[l]&&("undefined"===typeof n[l].data[r]&&(n[l].data[r]=0),n[l].data[r]+=e.amount/100)})),n.map((function(e,a){n[a].backgroundColor=L(n.length,a),n[a].borderColor=L(n.length,a)}));var l={labels:t,datasets:n};return r.a.createElement(b.Bar,{data:l,options:{maintainAspectRatio:!0}})},K=Object(p.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function Q(e){var a=K(),t=Object(f.a)(),n=e.count,l=e.page,c=e.rowsPerPage,o=e.onChangePage;return r.a.createElement("div",{className:a.root},r.a.createElement(M.a,{onClick:function(e){o(e,0)},disabled:0===l,"aria-label":"first page"},"rtl"===t.direction?r.a.createElement(B.a,null):r.a.createElement(R.a,null)),r.a.createElement(M.a,{onClick:function(e){o(e,l-1)},disabled:0===l,"aria-label":"previous page"},"rtl"===t.direction?r.a.createElement($.a,null):r.a.createElement(I.a,null)),r.a.createElement(M.a,{onClick:function(e){o(e,l+1)},disabled:l>=Math.ceil(n/c)-1,"aria-label":"next page"},"rtl"===t.direction?r.a.createElement(I.a,null):r.a.createElement($.a,null)),r.a.createElement(M.a,{onClick:function(e){o(e,Math.max(0,Math.ceil(n/c)-1))},disabled:l>=Math.ceil(n/c)-1,"aria-label":"last page"},"rtl"===t.direction?r.a.createElement(R.a,null):r.a.createElement(B.a,null)))}Q.propTypes={count:x.a.number.isRequired,onChangePage:x.a.func.isRequired,page:x.a.number.isRequired,rowsPerPage:x.a.number.isRequired};var U,z=function(e){var a=e.expenses,t=(e.width,e.height,a),n=r.a.useState(0),l=Object(s.a)(n,2),c=l[0],o=l[1],i=r.a.useState(5),u=Object(s.a)(i,2),m=u[0],d=u[1],g=m-Math.min(m,t.length-c*m);return r.a.createElement(k.a,{component:j.a},r.a.createElement(w.a,{"aria-label":"simple table"},r.a.createElement(A.a,null,r.a.createElement(O.a,null,r.a.createElement(C.a,{align:"left"},"Description"),r.a.createElement(C.a,{align:"left"},"Amount"),r.a.createElement(C.a,{align:"right"},"Status"),r.a.createElement(C.a,{align:"right"},"Tags"))),r.a.createElement(y.a,null,(m>0?t.slice(c*m,c*m+m):t).map((function(e){return r.a.createElement(O.a,{key:e.name},r.a.createElement(C.a,{component:"th",scope:"row"},e.description),r.a.createElement(C.a,{style:{width:160},align:"right"},e.amount/100," ",e.currency),r.a.createElement(C.a,{style:{width:160},align:"right"},e.status),r.a.createElement(C.a,{style:{width:160},align:"right"},e.tags))})),g>0&&r.a.createElement(O.a,{style:{height:53*g}},r.a.createElement(C.a,{colSpan:6}))),r.a.createElement(P.a,null,r.a.createElement(O.a,null,r.a.createElement(S.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:t.length,rowsPerPage:m,page:c,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,a){o(a)},onChangeRowsPerPage:function(e){d(parseInt(e.target.value,10)),o(0)},ActionsComponent:Q})))))},G=function(e){var a=e.expenses,t=(e.width,e.height,[]),n=[{data:[],backgroundColor:[],hoverBackgroundColor:[]}];(a=Object(E.orderBy)(a,(function(e){return e.createdAt}))).map((function(e){var a,r=null!==(a=e.tags[0])&&void 0!==a?a:"undefined",l=t.findIndex((function(e){return e===r}));-1===l?(l=t.push(r),n[0].data[l-1]=e.amount/100):n[0].data[l]+=e.amount/100})),t.map((function(e,a){n[0].backgroundColor[a]=L(t.length,a),n[0].hoverBackgroundColor[a]=L(t.length,a)}));var l={labels:t,datasets:n};return r.a.createElement(b.Doughnut,{data:l,options:{maintainAspectRatio:!0}})},W=Object(p.a)((function(e){return{root:{flexGrow:1},paper:{height:140,width:100},control:{padding:e.spacing(2)}}})),X=Object(i.gql)(U||(U=F())),H=function(e){var a=e.slug,t=e.locale,l=e.messages,c=e.date,o=W(),d=Object(n.useState)(800),p=Object(s.a)(d,1)[0],f=Object(n.useState)(300),E=Object(s.a)(f,1)[0],b=Object(n.useState)(null!==c&&void 0!==c?c:"2001-01-01"),v=Object(i.useQuery)(X,{variables:{account:{slug:a},slug:a,offset:0,dateFrom:b}}),x=v.loading,w=v.error,y=v.data,C=v.fetchMore;if(x)return r.a.createElement("p",null,"Loading...");if(w)return r.a.createElement("p",null,"Error :(");var k=y.account,A=y.expenses.nodes;return C({variables:{offset:y.expenses.nodes.length},updateQuery:function(e,a){var t=a.fetchMoreResult;return t?(t.expenses.nodes=e.expenses.nodes.concat(t.expenses.nodes),Object.assign({},t)):e}}).then((function(e){console.log("Res",e)})),l||(l={}),t||(t="en"),r.a.createElement(u.a,{locale:t,defaultLocale:"en",messages:l},r.a.createElement("div",{className:N},r.a.createElement("h1",{className:"header"},r.a.createElement("img",{className:T,src:k.imageUrl,alt:""}),k.name),r.a.createElement("div",{className:"content"},r.a.createElement("h2",null,r.a.createElement(m.a,{id:"allExpensesFrom",defaultMessage:"All expenses from {date}",values:{date:g()(b,"YYYY-MM-DD").format("DD/MM/YYYY")}})),r.a.createElement(h.a,{container:!0,className:o.root,spacing:2},r.a.createElement(h.a,{item:!0,xs:8},r.a.createElement(J,{expenses:A,width:p,height:E})),r.a.createElement(h.a,{item:!0,xs:4},r.a.createElement(G,{expenses:A,width:p,height:E}))),r.a.createElement(z,{expenses:A,width:p,height:E}))))},V=(t(259),localStorage.getItem("apiKey")),Z=new i.ApolloClient({uri:"https://api.opencollective.com/graphql/v2/"+V,cache:new i.InMemoryCache}),ee=function(){return r.a.createElement(i.ApolloProvider,{client:Z},r.a.createElement(H,{client:Z,slug:"xr-belgium",date:"2018-01-01",messages:{allExpensesFrom:"All expenses from {date}"}}))};c.a.render(r.a.createElement(ee,null),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.41f77040.chunk.js.map